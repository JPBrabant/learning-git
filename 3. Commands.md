# Help

## `help` 

  - `git help <command>`


# Creating a repository

## `init`

  - `git init`


## `clone`

  - `git clone <url>`


# Info about your repository

## `log`

  - `git log`                  : Show the whole commit history
      - `--all`                : All branches, not only the current one (HEAD).
      - `--oneline`            : Only the commit hash and the commit message will appear.
      - `--graph`              : Show a graph allowing you to see all merges.

  - `git log <path>…`          : Show commits related to a file.
      - `--follow`             : Continue listing the history of a file beyond renames (works only for a single file).

  - `git log -S <string>`      : Search `<string>` in the code and show commit that changed that code.

  - `git log --grep <pattern>` : Search the regex `<pattern>` in all commits messages.


## `show`

Shows one or more objects (tags, commits and branches).

  - `git show <object>` : Show the content of the object (usefull for tag and specific commit).

  - `git show <commit>:<path>` : Show the content of a file at a specific `<commit>`, if `<commit>` is omitted, the index is assumed.


## `status`

  - `git status` : Show your current branch, if it's up to date with origin, and the state of all untracked and tracked files.


## `blame`

  - `git blame <file>` : See who made each line in a file and when.


## `grep`

Search inside the working directory, the index or the repo. There is a lot of available options.

  - `git grep <search-pattern> <commit>`


## `diff`

  - `git diff` : Change between the working directory and the index.
      - `--name-only`   : Only the file name of modified files.
      - `--name-status` : Files name and if it was added, modified, or deleted.

  - `git diff (--cached|--staged)` : Change between the index and HEAD. 

  - `git diff <commit> <commit>` : Change between 2 commits.

  
## `ls-files`

  - `git ls-files`        : Show all filed tracked by git
      - `(-s|--stage)`    : Show files in the index
      - `(-u|--unmerged)` : In case a merge failed, show 3 version of the same file where 1. common ancestor, 2. ours changes, 3. theirs changes


# Commiting

Commiting is the act of saving a snapshot of your code. The process consist of staging your changes and then commiting. When you commit, a snapshot of the index is saved. The index start as a copy of everything that was saved in a commit, and the index is updated with `add`, `rm` and `mv`. 


## `add`

Updates the index using the current content found in the working tree, to prepare the content staged for the next commit. The index holds a snapshot of the content of the working tree, and it is this snapshot that is taken as the contents of the next commit. Everyting you add will be saved in the object database of git and can be restored.

  - `git add <pathspec>…`     : Stage a file.
      - `(-p|--patch)`       : Allow you to stage part of a file (hunk).

  - `git add`                 : Stage all files in the current directory (new files YES, modifications YES, deletions NO).
      - `(-u|--update)`      : Stage all files in the current directory (new files NO,  modifications YES, deletions YES).
      - `(-A|--all)`         : Stage all files in the current directory (new files YES, modifications YES, deletions YES).
      - `(-i|--interactive)` : Allow you to choose what files to add from a list.


## `rm`

Remove files from the index, or from the working tree **AND** the index. The next commit will show the file deleted, that tell git to stop tracking the file.

  - `git rm <pathspec>…` : Removes the file from the index and deletes it from the working directory.
      - `--cached`       : Removes the file from the index but keep it on disk as an untracked file.
      - `(-f|--force)`   : Necessery if the file was never tracked by git (the file will be unrecoverable).
      - `-r`             : To recurse inside a folder.

## `mv`

  - `git mv <source> <destination>` : Move or rename a file or directory.


## `commit`

Create a new commit containing the current contents of the index. After commiting, git will check at what branch HEAD is pointing, and move this branch to the new commit. In detached HEAD, HEAD is moved itself to point to the new commit.

Though not required, it's a good idea to begin the commit message with a single short (no more than 50 characters) line summarizing the change, followed by a blank line and then a more thorough description. 

  - `git commit`   : Commit the current state of the index. An editor will open to allow you to write a commit message. 
      - `--ammend` : Overwrite the last commit with the current state of the index.


# Branching

A branch in Git is a lightweight movable pointer to a commit.


## `branch`

List, create, move or delete branch.

When a local branch is started off a remote-tracking branch, Git sets up the branch so that git pull will appropriately merge from the remote-tracking branch.

  - `git branch`                                          : List all local branches.
      - `(-a|--all)`                                      : List all local and remote branches.

  - `git branch <branch-name> [<start-point>]`            : Create a branch (but don't switch to it). By default, `start-point` is `HEAD`. Can also be used to track a remote branch with the following pattern `origin/branchname` as `<start-point>`.

  - `git branch (-m|--move) <old-name> <new-name>`        : Rename.

  - `git branch (-d|--delete) <branch-name>`              : Delete.

  - `git branch (-f|--force) <branch-name> <start-point>` : Move the branch to a new commit.


## `switch`

Git change where HEAD is pointing and try to update both the working directory and the index with the content of the commit. If you have uncomitted change that would conflit, the command abort. 

  - `git switch <branch>`                      : Move HEAD to a branch (`-` shortcut for the previous branch).
      - `(-c|--create)`                        : Create and switch branch.

  - `git switch (-d|--detached) <start-point>` : Used for detached HEAD; switch to a specific commit. You have to use this option for remote branch because you can't move one of those directly.


# Merging

There is two main way to merge 2 branches, the first one is a standard merge, where git will create a merge commit. To avoid this merge commit, you can use the rebase strategy, which take all the commit from a branch and put them on the tip of the other branch. 

Merge and rebase can do fast-foward. It happen when HEAD is a direct line ancestor. In that case, HEAD will simply move to it child without doing anything. 


## `merge`

  - `git merge <commit>`             : Incorporates changes from the named commits (since the time their histories diverged) into HEAD.

  - `git merge (--continue|--abort)` : Fix merge conflict and then continue (you need to tell git that the conflict has been resolved with `git add`) or abort.


## `rebase`

  - `git rebase <destination-branch>` : Move changes from HEAD (since the time their histories diverged) to `<destination-branch>`.
      - `(-i|--interactive)`          : Manual rebase allow you to rewrite history (reorder, rewrite message, split or squash, …).

  - `git rebase (--continue|--abort)` : Fix merge conflict and then continue (you need to tell git that the conflict has been resolved with `git add`) or abort

  - `git rebase --onto <newbase> <upstream> <branch>` : Take everything between `<upstream>` and `<branch>` and put it on `<newbase>`


## `cherry-pick`

Given one or more existing commits, apply the change each one introduces, recording a new commit for each. This requires your working tree to be clean (no modifications from the HEAD commit).

  - `git cherry-pick <commit>…`


# Reverting change

## `restore`

Restore a file in the working directory (`--worktree`) and/or the index (`--staged`) from another commit (`--source`). If `--source` is omitted, HEAD for `--staged` and the index for `--worktree`.

  - `git restore <file>`    : Restore working directory `<file>` from the index
      - `--worktree`        : This is the default. Restore a file in the working directory. 
      - `--staged`          : Restore a file in the index. 
      - `--source <commit>` : From which commit to restore. Default is `HEAD` for `--staged` and index for `--worktree`.
      - `(-p|--patch)`      : Interactively select hunks in the difference between the restore source and the restore location. 


## `revert`

  - `git revert <commit>` : Create a new commit that revert the change made in `<commit>`


# History

## `reset` 

  - `git reset <commit>` : Move the branch referenced by HEAD to `<commit>`.
      - `--soft`         : Update just the branch; the staging area and working tree is untouched.
      - `--mixed`        : Update the branch and the index. This is the default.
      - `--hard`         : Update the branch, the index, and the working directory.

  - `git reset [<file>]` : Unstage a file or everything. 


## `reflog`

  - `git reflog`      : Show a history of everyting you did. You can use `git reset` to go back to any of those snapshot.  
      - `-n <number>` : Top 10.


# Stash

## `stash`

A place to save uncommited changes to a temporary stash.

  - `git stash push`
      - `(-m|--message)`           : Add a message to remember what you were doing.
      - `(-u|--include-untracked)` : Include new files (untracked).

  - `git stash pop`                : Remove a single stashed state from the stash list and apply it on top of the current working tree state.

  - `git stash list`               : List all your stash
  
  - `git stash drop <stash>`       : Delete a specifi stash (from `git stash list`)


# Remote

Configuration of the remote repo to sync with. See also `git clone` and `git branch` (to create a remote bracking branch) above. 

## `remote`

Add a remote to sync to in case you didn't use clone to start your repo. The name is usualy origin.

  - `git remote add <name> <url>` 


## `fetch`

Download objects and refs from another repository. Remote-tracking branches are updated but no new tracking branch will be created for new branches on the remote. 

  - `git fetch [<remote>] [<branch>]` : The `<remote>` usualy is `origin`. By default it fetch all remotes and all branches.


## `pull`

Fetch from and integrate (merge, rebase, of fast-foward) with another repository.

  - `git pull [<remote>] [<branch>]`
      - `--ff-only`     : Only update to the new history if there is no divergent local history.
      - `(-r|--rebase)` : Rebase the current branch on top of the upstream branch after fetching. 
      - `--no-rebase`   : Merge the upstream branch into the current branch after fetching.


## `push`

  - `git push`             : Push the current branch to its remote tracking branch.
      - `--all|--branches` : Push all branches.
      - `--tags`           : Push tags (annotated and lightweight).

  - `git push <remote> <branch>` : Push the specified branch.
      - `(-u|--set-upstream)`    : Push a branch that you've never pushed before.


# Others

## `tag`

  - `git tag` : List all tags.

  - `git tag <tagname> [<commit>]` : Create a lightweight tag. Used as local bookmark and should not be pushed. 
      - `(-a|--annotate )`         : Create an annotated tag with a message. Used to mark release and milestone, should be pushed.

  - `git tag (-d|--delete) <tagname>`



## `clean`

Cleans the working tree by recursively removing files that are not under version control (like temporary build artifacts or merge conflict files).

  - `git clean`           : Remove untracked files in your working repository.
      - `-d`              : Include untracked directories
      - `-x`              : Include ignored files (files in .gitignore)
      - `(-n|--dry-run)`  : See what it will delete
      - `(-f|--force)`    : Confirm the delete operation